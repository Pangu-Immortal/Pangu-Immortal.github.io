{% extends "admin/pink_base.html" %}
{% load i18n admin_urls static admin_list %}

{% block title %}{{ title }} | ç›˜å¤å¤§ä»™æ´åºœç®¡ç†åå°{% endblock %}

{% block content %}
<div class="pink-animate-fade-in">
    <div class="pink-card pink-mb-4">
        <div class="pink-card-header">
            <div class="pink-flex pink-justify-between pink-items-center">
                <h1 class="pink-card-title pink-text-primary">æ–‡ç« ç®¡ç†</h1>
                <a href="{% url 'admin:app_article_add' %}" class="pink-btn pink-btn-primary">
                    âœï¸ æ–°å»ºæ–‡ç« 
                </a>
            </div>
        </div>
        
        <div class="pink-card-body">
            {% if cl.result_count == 0 %}
                <div class="pink-text-center pink-py-8">
                    <div class="pink-mb-4">
                        <i class="fas fa-file-alt pink-text-3xl pink-text-light"></i>
                    </div>
                    <h3 class="pink-text-xl pink-font-semibold pink-text-dark pink-mb-2">æš‚æ— æ–‡ç« </h3>
                    <p class="pink-text-medium pink-mb-4">å¼€å§‹åˆ›å»ºä½ çš„ç¬¬ä¸€ç¯‡æ–‡ç« å§ï¼</p>
                    <a href="{% url 'admin:app_article_add' %}" class="pink-btn pink-btn-primary">åˆ›å»ºæ–‡ç« </a>
                </div>
            {% else %}
                <div class="pink-table-container pink-custom-scrollbar">
                    <table class="pink-table">
                        <thead>
                            <tr>
                                <th>æ ‡é¢˜</th>
                                <th class="pink-mobile:hidden">å‘å¸ƒæ—¶é—´</th>
                                <th>çŠ¶æ€</th>
                                <th class="pink-mobile:hidden">è¯„è®º</th>
                                <th class="pink-mobile:hidden">æ ‡ç­¾</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for article in cl.result_list %}
                            <tr class="{% if article.is_hidden %}pink-opacity-75{% endif %}">
                                <td>
                                    <div class="pink-flex pink-items-center pink-gap-3">
                                        {% if article.cover %}
                                            <img src="{{ article.cover.url }}" alt="å°é¢" class="pink-img-rounded" style="width: 40px; height: 40px; object-fit: cover;">
                                        {% else %}
                                            <div class="pink-bg-light pink-rounded-lg pink-flex pink-items-center pink-justify-center" style="width: 40px; height: 40px;">
                                                <i class="fas fa-file-alt pink-text-primary"></i>
                                            </div>
                                        {% endif %}
                                        <div>
                                            <h4 class="pink-font-semibold pink-text-dark pink-mb-1">{{ article.title }}</h4>
                                            <small class="pink-text-light">å‘å¸ƒäº {{ article.published_at|date:"Y-m-d H:i" }}</small>
                                        </div>
                                    </div>
                                </td>
                                <td class="pink-mobile:hidden">{{ article.published_at|date:"Y-m-d" }}</td>
                                <td>
                                    {% if article.is_hidden %}
                                        <span class="pink-status pink-status-draft">éšè—</span>
                                    {% else %}
                                        <span class="pink-status pink-status-published">æ˜¾ç¤º</span>
                                    {% endif %}
                                </td>
                                <td class="pink-mobile:hidden">
                                    <div class="pink-flex pink-gap-1 pink-flex-wrap">
                                        {% for tag in article.tags.all %}
                                            <span class="pink-text-xs pink-bg-light pink-text-primary pink-px-2 pink-py-1 pink-rounded-full">{{ tag.name }}</span>
                                        {% empty %}
                                            <span class="pink-text-light">-</span>
                                        {% endfor %}
                                    </div>
                                </td>
                                <td>
                                    <div class="pink-flex pink-gap-2 pink-table-actions">
                                        <a href="{% url 'admin:app_article_change' article.pk %}" class="pink-btn pink-btn-sm pink-btn-outline" title="ç¼–è¾‘">
                                            âœï¸ ç¼–è¾‘
                                        </a>
                                        <a href="{% url 'admin:app_article_delete' article.pk %}" class="pink-btn pink-btn-sm pink-btn-outline pink-text-danger" title="åˆ é™¤">
                                            ğŸ—‘ï¸ åˆ é™¤
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                {% if cl.result_count > 20 %}
                <div class="pink-mt-4">
                    {% admin_list_filter cl %}
                </div>
                {% endif %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}