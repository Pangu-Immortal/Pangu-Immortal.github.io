{% extends "admin/base_site.html" %}
{% load i18n static admin_urls %}

{% block title %}{% if title %}{{ title }} | {% endif %}{{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="{% static 'admin/pink-admin-responsive.css' %}">
<style>
/* ç²‰è‰²ç³»æš–è‰²é£ç®¡ç†åå°åŸºç¡€æ ·å¼ */

/* åŸºç¡€é‡ç½® */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    background: var(--bg-primary);
    color: var(--text-dark);
    min-height: 100vh;
    line-height: 1.6;
}

/* å¤´éƒ¨å¯¼èˆª - ç²‰è‰²ç»ç’ƒæ‹Ÿæ€æ•ˆæœ */
.header {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border-light);
    padding: var(--space-md) var(--space-xl);
    position: sticky;
    top: 0;
    z-index: var(--z-fixed);
    box-shadow: 0 8px 32px var(--shadow-light);
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1400px;
    margin: 0 auto;
}

.brand {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.brand h1 {
    color: var(--pink-primary);
    font-size: var(--text-2xl);
    font-weight: 700;
    text-shadow: 0 0 10px rgba(255, 107, 157, 0.3);
}

.user-info {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    color: var(--text-medium);
}

.user-info span {
    font-weight: 500;
}

.user-info a {
    color: var(--pink-primary);
    text-decoration: none;
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--pink-light);
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
}

.user-info a:hover {
    background: var(--pink-lighter);
    border-color: var(--pink-primary);
}

/* ä¸»è¦å†…å®¹åŒºåŸŸ */
.main-container {
    display: flex;
    min-height: calc(100vh - 80px);
}

/* ä¾§è¾¹æ  - ç²‰è‰²ç»ç’ƒæ‹Ÿæ€ */
.sidebar {
    width: 280px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border-right: 1px solid var(--border-light);
    padding: var(--space-xl) 0;
    position: sticky;
    top: 80px;
    height: calc(100vh - 80px);
    overflow-y: auto;
}

.sidebar-header {
    padding: 0 var(--space-xl) var(--space-xl);
}

.sidebar-search {
    width: 100%;
    background: var(--bg-secondary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: var(--space-md);
    color: var(--text-dark);
    font-size: var(--text-base);
    transition: all 0.2s ease;
}

.sidebar-search:focus {
    outline: none;
    border-color: var(--pink-primary);
    box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1);
}

.sidebar-section {
    padding: 0 var(--space-xl) var(--space-xl);
}

.sidebar-title {
    color: var(--pink-primary);
    font-size: var(--text-sm);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-md);
    padding-bottom: var(--space-sm);
    border-bottom: 1px solid var(--border-light);
}

.sidebar-nav {
    list-style: none;
}

.sidebar-nav li {
    margin-bottom: 0.5rem;
}

.sidebar-nav a {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    color: #cbd5e1;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.2s ease;
    font-weight: 500;
}

.sidebar-nav a:hover {
    background: rgba(56, 189, 248, 0.1);
    color: #7dd3fc;
}

.sidebar-nav a.active {
    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
}

.add-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.add-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.1);
}

/* ä¸»å†…å®¹åŒºåŸŸ */
.content {
    flex: 1;
    padding: 2rem;
    width: 100%;
    min-width: 0;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: fixed;
        left: -100%;
        top: 80px;
        height: calc(100vh - 80px);
        transition: left 0.3s ease;
        z-index: 999;
    }
    
    .sidebar.active {
        left: 0;
    }
    
    .content {
        max-width: 100vw;
        padding: 1rem;
    }
    
    .header-content {
        padding: 0 1rem;
    }
}

/* æ»šåŠ¨æ¡æ ·å¼ */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(15, 23, 42, 0.5);
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #075985 0%, #0c4a6e 100%);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #0e7490 0%, #0891b2 100%);
}

/* åŠ¨ç”»æ•ˆæœ */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in {
    animation: fadeIn 0.5s ease-out;
}

/* æŒ‰é’®æ ·å¼ */
.btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
    cursor: pointer;
    font-size: 0.9rem;
}

.btn-primary {
    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
}

.btn-primary:hover {
    background: linear-gradient(135deg, #0e7490 0%, #0891b2 100%);
    box-shadow: 0 6px 16px rgba(6, 182, 212, 0.4);
    transform: translateY(-1px);
}

.btn-secondary {
    background: linear-gradient(135deg, #475569 0%, #64748b 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(100, 116, 139, 0.3);
}

.btn-secondary:hover {
    background: linear-gradient(135deg, #334155 0%, #475569 100%);
    box-shadow: 0 6px 16px rgba(100, 116, 139, 0.4);
    transform: translateY(-1px);
}

.btn-success {
    background: linear-gradient(135deg, #059669 0%, #10b981 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.btn-success:hover {
    background: linear-gradient(135deg, #047857 0%, #059669 100%);
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
    transform: translateY(-1px);
}

.btn-danger {
    background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
}

.btn-danger:hover {
    background: linear-gradient(135deg, #b91c1c 0%, #dc2626 100%);
    box-shadow: 0 6px 16px rgba(220, 38, 38, 0.4);
    transform: translateY(-1px);
}

/* è¡¨å•æ ·å¼ */
.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    color: #7dd3fc;
    font-weight: 500;
    font-size: 0.9rem;
}

.form-control {
    width: 100%;
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid rgba(56, 189, 248, 0.3);
    border-radius: 8px;
    padding: 0.75rem 1rem;
    color: #e2e8f0;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

.form-control:focus {
    outline: none;
    border-color: #06b6d4;
    box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
}

.form-text {
    font-size: 0.8rem;
    color: #94a3b8;
    margin-top: 0.25rem;
}

/* å¡ç‰‡æ ·å¼ */
.card {
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid rgba(56, 189, 248, 0.2);
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 8px 32px rgba(2, 8, 20, 0.4);
    transition: all 0.3s ease;
}

.card:hover {
    box-shadow: 0 12px 40px rgba(56, 189, 248, 0.2);
    border-color: rgba(56, 189, 248, 0.4);
}

.card-header {
    border-bottom: 1px solid rgba(56, 189, 248, 0.2);
    padding-bottom: 1rem;
    margin-bottom: 1rem;
}

.card-title {
    color: #7dd3fc;
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0;
}

/* è¡¨æ ¼æ ·å¼ */
.table {
    width: 100%;
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid rgba(56, 189, 248, 0.2);
    border-radius: 12px;
    overflow: hidden;
}

.table th {
    background: linear-gradient(135deg, #075985 0%, #0c4a6e 100%);
    color: #e0f2fe;
    padding: 1rem;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid #06b6d4;
}

.table td {
    padding: 1rem;
    border-bottom: 1px solid rgba(56, 189, 248, 0.1);
    color: #cbd5e1;
}

.table tr:hover {
    background: rgba(56, 189, 248, 0.05);
}

/* çŠ¶æ€æ ‡ç­¾ */
.status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
}

.status-visible {
    background: rgba(34, 197, 94, 0.2);
    color: #bbf7d0;
    border: 1px solid rgba(34, 197, 94, 0.4);
}

.status-hidden {
    background: rgba(148, 163, 184, 0.2);
    color: #cbd5e1;
    border: 1px solid rgba(148, 163, 184, 0.4);
}

.comment-enabled {
    background: rgba(34, 197, 94, 0.2);
    color: #bbf7d0;
    border: 1px solid rgba(34, 197, 94, 0.4);
}

.comment-disabled {
    background: rgba(220, 38, 38, 0.2);
    color: #fecaca;
    border: 1px solid rgba(220, 38, 38, 0.4);
}

.tag {
    background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
}

/* ç©ºçŠ¶æ€ */
.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: #94a3b8;
}

.empty-state i {
    font-size: 4rem;
    color: #7dd3fc;
    margin-bottom: 1rem;
    opacity: 0.5;
}

.empty-state h3 {
    color: #e2e8f0;
    margin-bottom: 0.5rem;
}

.empty-state p {
    margin-bottom: 2rem;
}

/* åˆ†é¡µ */
.pagination {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 2rem;
}

.pagination a, .pagination span {
    padding: 0.5rem 1rem;
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid rgba(56, 189, 248, 0.2);
    border-radius: 6px;
    color: #cbd5e1;
    text-decoration: none;
    transition: all 0.2s ease;
}

.pagination a:hover {
    background: rgba(56, 189, 248, 0.1);
    color: #7dd3fc;
}

.pagination .current {
    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);
    color: white;
    border-color: #06b6d4;
}

/* å“åº”å¼å·¥å…· */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: fixed;
        left: -100%;
        top: 80px;
        height: calc(100vh - 80px);
        transition: left 0.3s ease;
        z-index: 999;
    }
    
    .sidebar.active {
        left: 0;
    }
    
    .content {
        max-width: 100vw;
        padding: 1rem;
    }
    
    .header-content {
        padding: 0 1rem;
    }
    
    .table {
        font-size: 0.8rem;
    }
    
    .btn {
        padding: 0.5rem 1rem;
        font-size: 0.8rem;
    }
}

/* éšè—åŸå§‹Django adminå…ƒç´  */
#header,
#nav-sidebar,
.breadcrumbs,
#content-main > .module:not(.custom-module) {
    display: none !important;
}

/* æ˜¾ç¤ºæˆ‘ä»¬çš„è‡ªå®šä¹‰å†…å®¹ */
.main-container {
    display: flex !important;
}
</style>
{% endblock %}

{% block extrahead %}
{{ block.super }}
<script>
// é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
document.addEventListener('DOMContentLoaded', function() {
    // æ·»åŠ æ·¡å…¥åŠ¨ç”»
    document.body.classList.add('fade-in');
    
    // æœç´¢åŠŸèƒ½
    const searchInput = document.getElementById('menu-search');
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const navItems = document.querySelectorAll('.sidebar-nav a');
            
            navItems.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    }
    
    // å½“å‰é¡µé¢é«˜äº®
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll('.sidebar-nav a');
    
    navLinks.forEach(link => {
        if (link.href.includes(currentPath)) {
            link.classList.add('active');
        }
    });
    
    // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
    const menuToggle = document.querySelector('.menu-toggle');
    const sidebar = document.querySelector('.sidebar');
    
    if (menuToggle && sidebar) {
        menuToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });
    }
    
    console.log('ğŸ‰ ç›˜å¤å¤§ä»™æ´åºœç®¡ç†åå°å·²åŠ è½½å®Œæˆï¼');
});
</script>
{% endblock %}

{% block nav-global %}
<div class="header">
    <div class="header-content">
        <div class="brand">
            <h1>ğŸ® ç›˜å¤å¤§ä»™æ´åºœ</h1>
        </div>
        <div class="user-info">
            <span>æ¬¢è¿ï¼Œ{{ user.username|default:"ç®¡ç†å‘˜" }}</span>
            <a href="{% url 'custom_admin:index' %}">ğŸ  ç®¡ç†é¦–é¡µ</a>
            <a href="/" target="_blank">ğŸŒ æŸ¥çœ‹ç«™ç‚¹</a>
            <a href="{% url 'custom_admin:password_change' %}">ğŸ”‘ ä¿®æ”¹å¯†ç </a>
            <a href="{% url 'custom_admin:logout' %}">ğŸšª é€€å‡ºç™»å½•</a>
        </div>
    </div>
</div>

<div class="main-container">
    <nav class="sidebar">
        <div class="sidebar-header">
            <input type="text" class="sidebar-search" placeholder="ğŸ” æœç´¢èœå•..." id="menu-search">
        </div>
        
        <div class="sidebar-section">
            <h3 class="sidebar-title">ğŸ“ å†…å®¹ç®¡ç†</h3>
            <ul class="sidebar-nav">
                <li><a href="{% url 'custom_admin:app_article_changelist' %}" class="{% if 'article' in request.path %}active{% endif %}">
                    <span>ğŸ“„ æ–‡ç« ç®¡ç†</span>
                    <button class="add-btn" onclick="window.location.href='{% url 'custom_admin:app_article_add' %}'" title="æ·»åŠ æ–°æ–‡ç« ">+</button>
                </a></li>
                <li><a href="{% url 'custom_admin:app_tag_changelist' %}" class="{% if 'tag' in request.path %}active{% endif %}">
                    <span>ğŸ·ï¸ æ ‡ç­¾ç®¡ç†</span>
                    <button class="add-btn" onclick="window.location.href='{% url 'custom_admin:app_tag_add' %}'" title="æ·»åŠ æ–°æ ‡ç­¾">+</button>
                </a></li>
                <li><a href="{% url 'custom_admin:app_comment_changelist' %}" class="{% if 'comment' in request.path %}active{% endif %}">
                    <span>ğŸ’¬ è¯„è®ºç®¡ç†</span>
                </a></li>
            </ul>
        </div>
        
        <div class="sidebar-section">
            <h3 class="sidebar-title">âš™ï¸ ç³»ç»Ÿç®¡ç†</h3>
            <ul class="sidebar-nav">
                <li><a href="{% url 'custom_admin:index' %}" class="{% if request.path == '/backend/' %}active{% endif %}">
                    <span>ğŸ“Š ç®¡ç†é¢æ¿</span>
                </a></li>
                <li><a href="{% url 'custom_admin:password_change' %}">
                    <span>ğŸ”‘ ä¿®æ”¹å¯†ç </span>
                </a></li>
                <li><a href="{% url 'custom_admin:logout' %}">
                    <span>ğŸšª é€€å‡ºç™»å½•</span>
                </a></li>
            </ul>
        </div>
    </nav>
    
    <main class="content">
        {% block content %}{% endblock %}
    </main>
</div>
{% endblock %}

